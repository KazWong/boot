<launch>
  <arg name="output" default="log"/>
  <arg name="sim" default="false"/>
  <arg name="driver" default="accelnet"/> <!-- accelnet | imc -->
  <arg name="keyboard" default="false"/>
  <arg name="joystick" default="false"/>
  <arg name="parking" default="false"/>
  <arg name="autorepeat_rate" default="12"/>
  
  <arg name="joy_dev" default="" />
  <!-- <arg name="config_filepath" default="$(find teleop_twist_joy)/config/xbox.config.yaml" /> -->
  
  <!-- Parameters -->
  <rosparam file="$(find description)/param/cartmove.yaml" ns="hardware"/>
  <rosparam file="$(find description)/param/can.yaml" ns="hardware"/>
  <rosparam file="$(find description)/param/parking.yaml" ns="hardware"/>
  <rosparam file="$(find description)/param/xbox.config.yaml" ns="joystick"/>
  

  <!-- Cartmove -->
  <node unless="$(arg sim)" pkg="cartmove" type="$(arg driver)" name="cart_sub" 
  output="$(arg output)" required="true"/>
  <!-- <node unless="$(arg sim)" pkg="cartmove" type="cart" name="cart_sub" 
        required="true" output="$(arg output)"/> -->

  <!-- joystick -->
  <node if="$(arg joystick)" pkg="joy" type="joy_node" name="joy_node" output="$(arg output)">
    <param name="dev" value="$(arg joy_dev)" />
    <param name="deadzone" value="0.3" />
    <param name="autorepeat_rate" value="$(arg autorepeat_rate)" />
  </node>
  <node if="$(arg joystick)" pkg="teleop_twist_joy" type="teleop_node" name="joystick">
    <!-- <rosparam command="load" file="$(arg config_filepath)" /> -->
  </node>

  <!-- Keyboard -->
  <node if="$(arg keyboard)" pkg="teleop_twist_keyboard" type="teleop_twist_keyboard.py" name="keyboard" output="$(arg output)"/>
  
  <!-- Parking -->
  <node if="$(arg parking)" pkg="parking" name="parking_server" type="parking_srv" 
        output="$(arg output)"/>
</launch>
